<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstarter &mdash; naturf 1.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" />
      <link rel="stylesheet" type="text/css" href="_static/katex-math.css?v=91adb8b6" />
      <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
      <link rel="stylesheet" type="text/css" href="_static/css/naturf.css?v=f9b8f5c0" />
      <link rel="stylesheet" type="text/css" href="_static/css/getting_started.css?v=be86cd7f" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=292eb321"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/katex.min.js?v=48ec3933"></script>
        <script src="_static/auto-render.min.js?v=8b9f325c"></script>
        <script src="_static/katex_autorenderer.js?v=bebc588a"></script>
        <script src="_static/design-tabs.js?v=36754332"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="User guide" href="user_guide.html" />
    <link rel="prev" title="naturf documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            naturf
          </a>
              <div class="version">
                1.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstarter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#input-data">Input data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-naturf">1. Install <cite>naturf</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="#edit-config-variables-and-create-run-script">2. Edit config variables and create run script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-naturf">3. Run <cite>naturf</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-using-the-dagworks-platform">Run using the DAGWorks Platform</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">User guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">naturf</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to <strong>naturf</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_to_cite.html">How to cite <strong>naturf</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors and Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="footer.html">Acknowledgement</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">naturf</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quickstarter</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quickstarter.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quickstarter">
<h1>Quickstarter<a class="headerlink" href="#quickstarter" title="Link to this heading"></a></h1>
<section id="input-data">
<h2>Input data<a class="headerlink" href="#input-data" title="Link to this heading"></a></h2>
<p>The only input data required for <cite>naturf</cite> is a shapefile with building footprints and height data. There should be a field with a unique ID for each building the shapefile, and it should be in a projected coordinate system such as Alber Equal Area Conic. For input to the Weather Research and Forecasting model (WRF), the computed parameters for each building will be projected into WGS 84.</p>
<p>Either check out our interactive <a class="reference internal" href="#"><span class="doc">quickstarter</span></a>, or continue below to run <cite>naturf</cite> using a python file. Users need to have <a class="reference external" href="https://graphviz.org/download/">graphviz</a> installed to visualize the Directed Acyclic Graph (DAG).</p>
</section>
<section id="install-naturf">
<h2>1. Install <cite>naturf</cite><a class="headerlink" href="#install-naturf" title="Link to this heading"></a></h2>
<p>In a clean virtual or Conda environment, install <cite>naturf</cite>. NOTE: For Conda environments using Python 3.12, the <cite>setuptools</cite> package does not work as intended. One workaround is to create a Conda environment in Python 3.11.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>naturf
</pre></div>
</div>
</section>
<section id="edit-config-variables-and-create-run-script">
<h2>2. Edit config variables and create run script<a class="headerlink" href="#edit-config-variables-and-create-run-script" title="Link to this heading"></a></h2>
<p>The <cite>config</cite> module in <cite>naturf</cite> sets the default names for variables used in the <cite>naturf</cite> workflow. The two variables below need to be modified to reflect the ID field and the building height field of the input shapefile. Instructions on changing field names will be given further below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DATA_ID_FIELD_NAME</span>
<span class="n">DATA_HEIGHT_FIELD_NAME</span>
</pre></div>
</div>
<p>Create a python script called <cite>run.py</cite> to run <cite>naturf</cite>. The code below runs the example data.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">importlib.resources</span> <span class="kn">import</span> <span class="n">files</span>
<span class="kn">from</span> <span class="nn">naturf</span> <span class="kn">import</span> <span class="n">driver</span>

<span class="n">input_shapefile_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">files</span><span class="p">(</span><span class="s2">&quot;naturf.data&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;C-5.shp&quot;</span><span class="p">))</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;input_shapefile&quot;</span><span class="p">:</span> <span class="n">input_shapefile_path</span><span class="p">}</span>
<span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;write_binary&quot;</span><span class="p">,</span> <span class="s2">&quot;write_index&quot;</span><span class="p">]</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="n">model</span><span class="o">.</span><span class="n">graph</span><span class="p">()</span>
</pre></div>
</div>
<p>To run data other than the example data, create the <cite>run.py</cite> below.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">naturf</span> <span class="kn">import</span> <span class="n">driver</span>
<span class="kn">from</span> <span class="nn">naturf.config</span> <span class="kn">import</span> <span class="n">Settings</span>

<span class="n">Settings</span><span class="o">.</span><span class="n">DATA_ID_FIELD_NAME</span> <span class="o">=</span> <span class="s2">&quot;YOUR_ID_FIELD_NAME_HERE&quot;</span>
<span class="n">Settings</span><span class="o">.</span><span class="n">DATA_HEIGHT_FIELD_NAME</span> <span class="o">=</span> <span class="s2">&quot;YOUR_HEIGHT_FIELD_NAME_HERE&quot;</span>

<span class="n">input_shapefile_path</span> <span class="o">=</span> <span class="s2">&quot;PATH_TO_YOUR_DATA&quot;</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;input_shapefile&quot;</span><span class="p">:</span> <span class="n">input_shapefile_path</span><span class="p">}</span>
<span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;write_binary&quot;</span><span class="p">,</span> <span class="s2">&quot;write_index&quot;</span><span class="p">]</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="n">model</span><span class="o">.</span><span class="n">graph</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="run-naturf">
<h2>3. Run <cite>naturf</cite><a class="headerlink" href="#run-naturf" title="Link to this heading"></a></h2>
<p>This will run all functions required to create the output specified in the <cite>run.py</cite> <cite>output_columns</cite> variable. Currently <cite>write_binary</cite> and <cite>write_index</cite>. The <cite>path</cite> variable should point towards the input shapefile.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python<span class="w"> </span>run.py
</pre></div>
</div>
</section>
<section id="run-using-the-dagworks-platform">
<h2>Run using the <a class="reference external" href="app.dagworks.io">DAGWorks Platform</a><a class="headerlink" href="#run-using-the-dagworks-platform" title="Link to this heading"></a></h2>
<p>Set the DAGWorks API Key as an environment variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">DAGWORKS_API_KEY</span><span class="o">=</span><span class="s2">&quot;&lt;your API Key&gt;&quot;</span>
</pre></div>
</div>
<p>Start with the <cite>run.py</cite> file from above (using either the example data or your own data) and add the following. Import os and DAGWorks adapters, which contains the tracker:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">dagworks</span> <span class="kn">import</span> <span class="n">adapters</span>
</pre></div>
</div>
<p>Initialize the DAGWorks tracker:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">tracker</span> <span class="o">=</span> <span class="n">adapters</span><span class="o">.</span><span class="n">DAGWorksTracker</span><span class="p">(</span>
        <span class="n">project_id</span><span class="o">=&lt;</span><span class="n">your</span> <span class="n">project</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="n">api_key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;DAGWORKS_API_KEY&quot;</span><span class="p">],</span>
        <span class="n">username</span><span class="o">=</span><span class="s2">&quot;&lt;your username&gt;&quot;</span><span class="p">,</span>
        <span class="n">dag_name</span><span class="o">=</span><span class="s2">&quot;&lt;name of the DAG&gt;&quot;</span><span class="p">,</span>
        <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;environment&quot;</span><span class="p">:</span> <span class="s2">&quot;DEV&quot;</span><span class="p">,</span> <span class="s2">&quot;team&quot;</span><span class="p">:</span> <span class="s2">&quot;MY_TEAM&quot;</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;X&quot;</span><span class="p">},</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Add <cite>tracker</cite> to the <cite>hamilton_adaptors</cite> list:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">hamilton_adapters</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">base</span><span class="o">.</span><span class="n">SimplePythonDataFrameGraphAdapter</span><span class="p">(),</span>
            <span class="n">h_tqdm</span><span class="o">.</span><span class="n">ProgressBar</span><span class="p">(</span><span class="s2">&quot;Naturf DAG&quot;</span><span class="p">),</span>
            <span class="n">tracker</span><span class="p">,</span>
        <span class="p">]</span>
</pre></div>
</div>
<p>Run the python file!</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python<span class="w"> </span>run.py
</pre></div>
</div>
<p>You should see a run on the <a class="reference external" href="app.dagworks.io">DAGWorks Platform</a>!</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="naturf documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="user_guide.html" class="btn btn-neutral float-right" title="User guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2099, Battelle Memorial Institute.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>